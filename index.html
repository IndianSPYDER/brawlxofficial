<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BRAWL X - Street Fighter</title>
    <link href="https://fonts.googleapis.com/css2?family=Black+Ops+One&family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --neon-cyan: #00ffff;
            --neon-magenta: #ff00ff;
            --neon-yellow: #ffff00;
            --dark-bg: #0a0a0a;
            --grid-color: #1a1a2e;
            --damage-red: #ff0040;
            --health-green: #00ff88;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Orbitron', monospace;
            background: var(--dark-bg);
            color: var(--neon-cyan);
            overflow: hidden;
            height: 100vh;
            position: relative;
        }

        /* Login/Signup Screen */
        #auth-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            background: radial-gradient(ellipse at center, rgba(0,255,255,0.1) 0%, rgba(0,0,0,0.95) 100%);
            z-index: 1000;
        }

        .auth-container {
            background: rgba(0,0,0,0.9);
            border: 3px solid var(--neon-cyan);
            padding: 3rem 4rem;
            min-width: 400px;
            box-shadow: 0 0 50px rgba(0,255,255,0.3);
        }

        .auth-container h2 {
            font-family: 'Black Ops One', cursive;
            font-size: 3rem;
            text-align: center;
            margin-bottom: 2rem;
            background: linear-gradient(45deg, var(--neon-cyan), var(--neon-magenta));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            color: var(--neon-cyan);
            margin-bottom: 0.5rem;
            font-size: 1rem;
            text-transform: uppercase;
            letter-spacing: 0.1rem;
        }

        .form-group input {
            width: 100%;
            padding: 0.8rem;
            background: rgba(0,0,0,0.5);
            border: 2px solid var(--neon-cyan);
            color: var(--neon-cyan);
            font-family: 'Orbitron', monospace;
            font-size: 1rem;
            transition: all 0.3s;
        }

        .form-group input:focus {
            outline: none;
            border-color: var(--neon-magenta);
            box-shadow: 0 0 15px rgba(255,0,255,0.5);
        }

        .auth-btn {
            width: 100%;
            padding: 1rem;
            font-family: 'Orbitron', monospace;
            font-size: 1.2rem;
            background: transparent;
            color: var(--neon-magenta);
            border: 2px solid var(--neon-magenta);
            cursor: pointer;
            margin-top: 1rem;
            text-transform: uppercase;
            letter-spacing: 0.2rem;
            transition: all 0.3s;
        }

        .auth-btn:hover {
            background: var(--neon-magenta);
            color: var(--dark-bg);
            box-shadow: 0 0 20px var(--neon-magenta);
        }

        .auth-toggle {
            text-align: center;
            margin-top: 1.5rem;
            color: var(--neon-cyan);
            font-size: 0.9rem;
        }

        .auth-toggle a {
            color: var(--neon-magenta);
            cursor: pointer;
            text-decoration: none;
            font-weight: 700;
        }

        .auth-toggle a:hover {
            text-shadow: 0 0 10px var(--neon-magenta);
        }

        .welcome-user {
            position: fixed;
            top: 50px;
            right: 30px;
            color: var(--neon-cyan);
            font-size: 1rem;
            z-index: 500;
            display: none;
            background: rgba(0,0,0,0.8);
            padding: 0.5rem 1rem;
            border: 1px solid var(--neon-cyan);
        }

        .logout-btn {
            background: transparent;
            border: 1px solid var(--neon-cyan);
            color: var(--neon-cyan);
            padding: 0.3rem 0.8rem;
            margin-left: 1rem;
            cursor: pointer;
            font-family: 'Orbitron', monospace;
            transition: all 0.3s;
        }

        .logout-btn:hover {
            background: var(--neon-cyan);
            color: var(--dark-bg);
        }

        .error-msg {
            color: var(--damage-red);
            text-align: center;
            margin-top: 1rem;
            font-size: 0.9rem;
            display: none;
        }

        /* Animated grid background */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(var(--grid-color) 1px, transparent 1px),
                linear-gradient(90deg, var(--grid-color) 1px, transparent 1px);
            background-size: 50px 50px;
            animation: gridScroll 20s linear infinite;
            opacity: 0.3;
            z-index: 0;
        }

        @keyframes gridScroll {
            0% { transform: perspective(500px) rotateX(60deg) translateY(0); }
            100% { transform: perspective(500px) rotateX(60deg) translateY(50px); }
        }

        #game-container {
            position: relative;
            z-index: 1;
            width: 100%;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Title Screen */
        #title-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: radial-gradient(ellipse at center, rgba(255,0,255,0.1) 0%, rgba(0,0,0,0.9) 100%);
            z-index: 100;
            animation: pulseGlow 2s ease-in-out infinite;
        }

        @keyframes pulseGlow {
            0%, 100% { filter: brightness(1); }
            50% { filter: brightness(1.2); }
        }

        h1 {
            font-family: 'Black Ops One', cursive;
            font-size: 8rem;
            background: linear-gradient(45deg, var(--neon-cyan), var(--neon-magenta), var(--neon-yellow));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 0 30px rgba(0,255,255,0.5), 0 0 60px rgba(255,0,255,0.3);
            animation: titleGlitch 3s ease-in-out infinite;
            letter-spacing: 0.2rem;
        }

        @keyframes titleGlitch {
            0%, 90%, 100% { transform: translate(0); }
            92% { transform: translate(-3px, 2px); }
            94% { transform: translate(2px, -2px); }
            96% { transform: translate(-2px, 1px); }
        }

        .subtitle {
            font-size: 1.5rem;
            color: var(--neon-cyan);
            text-transform: uppercase;
            letter-spacing: 0.5rem;
            margin-top: 1rem;
            animation: flicker 2s linear infinite;
        }

        @keyframes flicker {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }

        #start-btn {
            margin-top: 3rem;
            padding: 1.5rem 4rem;
            font-family: 'Black Ops One', cursive;
            font-size: 2rem;
            background: transparent;
            color: var(--neon-magenta);
            border: 3px solid var(--neon-magenta);
            cursor: pointer;
            position: relative;
            overflow: hidden;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 0.3rem;
        }

        #start-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: var(--neon-magenta);
            transform: translate(-50%, -50%);
            transition: width 0.3s, height 0.3s;
            z-index: -1;
        }

        #start-btn:hover::before {
            width: 100%;
            height: 100%;
        }

        #start-btn:hover {
            color: var(--dark-bg);
            box-shadow: 0 0 20px var(--neon-magenta), 0 0 40px var(--neon-magenta);
            transform: scale(1.05);
        }

        #coming-soon-btn {
            margin-top: 1.5rem;
            padding: 1rem 3rem;
            font-family: 'Orbitron', monospace;
            font-size: 1.3rem;
            background: transparent;
            color: var(--neon-cyan);
            border: 2px solid var(--neon-cyan);
            cursor: pointer;
            position: relative;
            overflow: hidden;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 0.2rem;
        }

        #coming-soon-btn:hover {
            background: var(--neon-cyan);
            color: var(--dark-bg);
            box-shadow: 0 0 20px var(--neon-cyan);
            transform: scale(1.05);
        }

        #admin-btn {
            margin-top: 1.5rem;
            padding: 0.8rem 2.5rem;
            font-family: 'Orbitron', monospace;
            font-size: 1.1rem;
            background: transparent;
            color: var(--damage-red);
            border: 2px solid var(--damage-red);
            cursor: pointer;
            position: relative;
            overflow: hidden;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 0.2rem;
        }

        #admin-btn:hover {
            background: var(--damage-red);
            color: var(--dark-bg);
            box-shadow: 0 0 20px var(--damage-red);
            transform: scale(1.05);
        }

        /* Coming Soon Modal */
        #coming-soon-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background: rgba(0,0,0,0.95);
            border: 3px solid var(--neon-cyan);
            padding: 3rem 4rem;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 0 50px rgba(0,255,255,0.5);
            position: relative;
        }

        .modal-content::-webkit-scrollbar {
            width: 10px;
        }

        .modal-content::-webkit-scrollbar-track {
            background: rgba(0,0,0,0.5);
            border: 1px solid var(--neon-cyan);
        }

        .modal-content::-webkit-scrollbar-thumb {
            background: var(--neon-cyan);
            box-shadow: 0 0 10px var(--neon-cyan);
        }

        .modal-content::-webkit-scrollbar-thumb:hover {
            background: var(--neon-magenta);
            box-shadow: 0 0 10px var(--neon-magenta);
        }

        .modal-content h2 {
            font-family: 'Black Ops One', cursive;
            font-size: 3rem;
            text-align: center;
            margin-bottom: 2rem;
            color: var(--neon-cyan);
            text-shadow: 0 0 20px var(--neon-cyan);
        }

        .feature-list {
            list-style: none;
            margin-bottom: 2rem;
        }

        .feature-item {
            padding: 1rem 0;
            border-bottom: 1px solid rgba(0,255,255,0.2);
        }

        .feature-item:last-child {
            border-bottom: none;
        }

        .feature-title {
            font-size: 1.3rem;
            color: var(--neon-magenta);
            font-weight: 900;
            margin-bottom: 0.5rem;
            text-transform: uppercase;
        }

        .feature-desc {
            color: var(--neon-cyan);
            font-size: 1rem;
            line-height: 1.6;
        }

        .feature-date {
            color: var(--neon-yellow);
            font-size: 0.9rem;
            margin-top: 0.5rem;
            font-weight: 700;
        }

        .close-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            background: transparent;
            border: 2px solid var(--damage-red);
            color: var(--damage-red);
            width: 40px;
            height: 40px;
            cursor: pointer;
            font-size: 2rem;
            line-height: 1;
            transition: all 0.3s;
            font-weight: 900;
        }

        .close-modal:hover {
            background: var(--damage-red);
            color: var(--dark-bg);
            transform: rotate(90deg);
        }

        /* HUD */
        #hud {
            display: none;
            padding: 2rem;
            position: relative;
        }

        .hud-top {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            gap: 2rem;
        }

        .player-hud {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .player-name {
            font-size: 1.5rem;
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 0.2rem;
        }

        .health-bar-container {
            background: rgba(0,0,0,0.8);
            border: 2px solid var(--neon-cyan);
            padding: 0.5rem;
            border-radius: 0;
            position: relative;
            box-shadow: inset 0 0 20px rgba(0,255,255,0.2);
            width: 100%;
        }

        .health-bar {
            height: 30px;
            background: linear-gradient(90deg, var(--health-green), var(--neon-yellow), var(--damage-red));
            transition: width 0.3s ease;
            position: relative;
            box-shadow: 0 0 10px var(--health-green);
            width: 100%;
            max-width: 100%;
        }

        .health-bar.reverse {
            background: linear-gradient(90deg, var(--damage-red), var(--neon-yellow), var(--health-green));
        }

        .health-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(180deg, rgba(255,255,255,0.3) 0%, transparent 50%, rgba(0,0,0,0.3) 100%);
        }

        #timer {
            position: absolute;
            top: 2rem;
            left: 50%;
            transform: translateX(-50%);
            font-size: 4rem;
            font-weight: 900;
            color: var(--neon-yellow);
            text-shadow: 0 0 20px var(--neon-yellow);
            animation: timerPulse 1s ease-in-out infinite;
        }

        #leave-btn {
            position: absolute;
            top: 8rem;
            left: 50%;
            transform: translateX(-50%);
            padding: 0.5rem 2rem;
            font-family: 'Orbitron', monospace;
            font-size: 1rem;
            background: transparent;
            color: var(--damage-red);
            border: 2px solid var(--damage-red);
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 0.2rem;
            z-index: 100;
        }

        #leave-btn:hover {
            background: var(--damage-red);
            color: var(--dark-bg);
            box-shadow: 0 0 20px var(--damage-red);
        }

        @keyframes timerPulse {
            0%, 100% { transform: translateX(-50%) scale(1); }
            50% { transform: translateX(-50%) scale(1.1); }
        }

        /* Arena */
        #arena {
            flex: 1;
            position: relative;
            display: none;
            overflow: hidden;
        }

        #arena::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, var(--neon-cyan), var(--neon-magenta), var(--neon-cyan));
            box-shadow: 0 0 20px var(--neon-cyan);
        }

        .fighter {
            position: absolute;
            bottom: 100px;
            width: 80px;
            height: 120px;
            transition: all 0.1s linear;
        }

        #player1 {
            left: 100px;
        }

        #player2 {
            right: 100px;
        }

        .fighter-body {
            width: 100%;
            height: 100%;
            position: relative;
            filter: drop-shadow(0 0 10px currentColor);
        }

        /* Fighter shapes */
        .head {
            width: 30px;
            height: 30px;
            background: currentColor;
            border-radius: 50%;
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            top: 0;
        }

        .torso {
            width: 40px;
            height: 50px;
            background: currentColor;
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            top: 30px;
            clip-path: polygon(20% 0%, 80% 0%, 100% 100%, 0% 100%);
        }

        .arm {
            width: 15px;
            height: 40px;
            background: currentColor;
            position: absolute;
            top: 35px;
        }

        .arm-left {
            left: 10px;
            transform-origin: top center;
        }

        .arm-right {
            right: 10px;
            transform-origin: top center;
        }

        .leg {
            width: 18px;
            height: 45px;
            background: currentColor;
            position: absolute;
            top: 75px;
        }

        .leg-left {
            left: 20px;
        }

        .leg-right {
            right: 20px;
        }

        /* Punching animation */
        .punching .arm-right {
            animation: punch 0.2s ease-out;
        }

        @keyframes punch {
            0% { transform: rotate(0deg) translateX(0); }
            50% { transform: rotate(-20deg) translateX(15px); }
            100% { transform: rotate(0deg) translateX(0); }
        }

        /* Kicking animation */
        .kicking .leg-right {
            animation: kick 0.3s ease-out;
        }

        @keyframes kick {
            0% { transform: rotate(0deg); }
            50% { transform: rotate(45deg); }
            100% { transform: rotate(0deg); }
        }

        /* Blocking animation */
        .blocking {
            filter: brightness(1.5) drop-shadow(0 0 15px currentColor);
        }

        /* Jumping animation */
        .jumping {
            animation: jump 0.5s ease-in-out;
        }

        @keyframes jump {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-100px); }
        }

        /* Hit effect */
        .hit {
            animation: hitFlash 0.2s;
        }

        @keyframes hitFlash {
            0%, 100% { filter: brightness(1) drop-shadow(0 0 10px currentColor); }
            50% { filter: brightness(3) drop-shadow(0 0 30px var(--damage-red)); }
        }

        /* Particle effects */
        .particle {
            position: absolute;
            width: 8px;
            height: 8px;
            background: var(--neon-cyan);
            border-radius: 50%;
            pointer-events: none;
            animation: particleFade 0.5s ease-out forwards;
        }

        @keyframes particleFade {
            0% {
                opacity: 1;
                transform: translate(0, 0) scale(1);
            }
            100% {
                opacity: 0;
                transform: translate(var(--tx), var(--ty)) scale(0);
            }
        }

        /* Controls display */
        #controls {
            position: fixed;
            top: 200px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.95);
            border: 3px solid var(--neon-yellow);
            padding: 2rem 4rem;
            display: none;
            gap: 5rem;
            box-shadow: 0 0 40px rgba(255,255,0,0.4), inset 0 0 20px rgba(255,255,0,0.1);
            z-index: 50;
        }

        #close-controls {
            position: absolute;
            top: 10px;
            right: 10px;
            background: transparent;
            border: 2px solid var(--damage-red);
            color: var(--damage-red);
            width: 30px;
            height: 30px;
            cursor: pointer;
            font-size: 1.5rem;
            line-height: 1;
            transition: all 0.3s;
            font-weight: 900;
        }

        #close-controls:hover {
            background: var(--damage-red);
            color: var(--dark-bg);
            transform: rotate(90deg);
        }

        .control-group {
            text-align: center;
            min-width: 250px;
        }

        .control-group h3 {
            color: var(--neon-yellow);
            margin-bottom: 1rem;
            font-size: 1.8rem;
            text-transform: uppercase;
            letter-spacing: 0.2rem;
            text-shadow: 0 0 10px var(--neon-yellow);
            font-weight: 900;
        }

        .control-group p {
            color: var(--neon-cyan);
            font-size: 1.2rem;
            line-height: 2.2;
            font-weight: 700;
        }

        .control-key {
            display: inline-block;
            background: var(--neon-magenta);
            color: var(--dark-bg);
            padding: 0.2rem 0.5rem;
            border-radius: 3px;
            font-weight: 900;
            margin: 0 0.2rem;
            font-size: 0.9rem;
            box-shadow: 0 0 8px var(--neon-magenta);
        }

        /* Game Over */
        #game-over {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.95);
            border: 3px solid var(--neon-magenta);
            padding: 3rem 5rem;
            text-align: center;
            display: none;
            z-index: 200;
            box-shadow: 0 0 50px rgba(255,0,255,0.5);
        }

        #game-over h2 {
            font-family: 'Black Ops One', cursive;
            font-size: 4rem;
            color: var(--neon-yellow);
            margin-bottom: 1rem;
            text-shadow: 0 0 20px var(--neon-yellow);
        }

        #winner-text {
            font-size: 2rem;
            color: var(--neon-cyan);
            margin-bottom: 2rem;
        }

        #restart-btn {
            padding: 1rem 3rem;
            font-family: 'Orbitron', monospace;
            font-size: 1.5rem;
            background: transparent;
            color: var(--neon-magenta);
            border: 2px solid var(--neon-magenta);
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
        }

        #restart-btn:hover {
            background: var(--neon-magenta);
            color: var(--dark-bg);
            box-shadow: 0 0 20px var(--neon-magenta);
        }

        /* Combo counter */
        .combo {
            position: absolute;
            font-size: 3rem;
            font-weight: 900;
            color: var(--neon-yellow);
            text-shadow: 0 0 20px var(--neon-yellow);
            animation: comboPopup 0.5s ease-out;
            pointer-events: none;
        }

        @keyframes comboPopup {
            0% {
                transform: scale(0) rotate(-10deg);
                opacity: 0;
            }
            50% {
                transform: scale(1.3) rotate(5deg);
                opacity: 1;
            }
            100% {
                transform: scale(1) rotate(0deg);
                opacity: 0;
            }
        }

        /* Global Message Banner */
        #global-message {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background: linear-gradient(90deg, rgba(255,0,255,0.95), rgba(0,255,255,0.95));
            color: var(--dark-bg);
            text-align: center;
            padding: 1.5rem 2rem;
            font-size: 1.5rem;
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 0.2rem;
            z-index: 9999;
            display: none;
            box-shadow: 0 5px 30px rgba(255,0,255,0.6);
            animation: slideDown 0.5s ease-out;
            font-family: 'Black Ops One', cursive;
        }

        @keyframes slideDown {
            from {
                transform: translateY(-100%);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        #global-message.fade-out {
            animation: fadeOut 0.5s ease-out forwards;
        }

        @keyframes fadeOut {
            from {
                opacity: 1;
                transform: translateY(0);
            }
            to {
                opacity: 0;
                transform: translateY(-100%);
            }
        }

        /* Admin Console Modal */
        #admin-console-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.95);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 3000;
            animation: fadeIn 0.3s;
        }

        .admin-console-content {
            background: rgba(0,0,0,0.98);
            border: 3px solid var(--neon-yellow);
            padding: 0;
            max-width: 1200px;
            width: 95%;
            max-height: 85vh;
            box-shadow: 0 0 60px rgba(255,255,0,0.6);
            position: relative;
            overflow: hidden;
        }

        .admin-console-content h2 {
            font-family: 'Black Ops One', cursive;
            font-size: 2.5rem;
            text-align: center;
            padding: 2rem 4rem;
            margin: 0;
            background: linear-gradient(90deg, rgba(0,255,255,0.2), rgba(255,0,255,0.2));
            border-bottom: 2px solid var(--neon-yellow);
            color: var(--neon-yellow);
            text-shadow: 0 0 20px var(--neon-yellow);
        }

        /* Split Panel Styles */
        .admin-split-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0;
            height: calc(85vh - 150px);
            overflow-y: auto;
        }

        .admin-panel-left,
        .admin-panel-right {
            padding: 2.5rem;
            min-height: 400px;
        }

        .admin-panel-left {
            border-right: 2px solid rgba(0,255,255,0.3);
            background: linear-gradient(135deg, rgba(0,255,255,0.05) 0%, transparent 100%);
        }

        .admin-panel-right {
            background: linear-gradient(135deg, rgba(255,0,64,0.05) 0%, transparent 100%);
        }

        .admin-panel-header {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid rgba(0,255,255,0.3);
        }

        .admin-panel-header h3 {
            font-family: 'Black Ops One', cursive;
            font-size: 1.8rem;
            text-transform: uppercase;
            letter-spacing: 0.1rem;
        }

        .admin-panel-left .admin-panel-header h3 {
            color: var(--neon-cyan);
            text-shadow: 0 0 15px var(--neon-cyan);
        }

        .admin-panel-left .admin-panel-header {
            border-bottom-color: rgba(0,255,255,0.3);
        }

        .admin-panel-right .admin-panel-header h3 {
            color: var(--damage-red);
            text-shadow: 0 0 15px var(--damage-red);
        }

        .admin-panel-right .admin-panel-header {
            border-bottom-color: rgba(255,0,64,0.3);
        }

        .admin-panel-icon {
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
        }

        .tbd-placeholder {
            background: rgba(0,0,0,0.6);
            border: 2px dashed rgba(0,255,255,0.3);
            padding: 4rem 2rem;
            text-align: center;
            border-radius: 8px;
        }

        .tbd-placeholder h4 {
            font-family: 'Black Ops One', cursive;
            font-size: 3rem;
            color: var(--neon-magenta);
            text-shadow: 0 0 20px var(--neon-magenta);
            margin-bottom: 1rem;
            letter-spacing: 0.3rem;
            animation: tbdPulse 2s ease-in-out infinite;
        }

        @keyframes tbdPulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }

        .tbd-placeholder p {
            color: var(--neon-cyan);
            font-size: 1.1rem;
            opacity: 0.8;
        }

        /* Device Selection Screen */
        #device-selection {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.95);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 150;
            animation: fadeIn 0.3s;
        }

        .device-selection-container {
            background: rgba(0,0,0,0.9);
            border: 3px solid var(--neon-cyan);
            padding: 3rem 4rem;
            text-align: center;
            box-shadow: 0 0 50px rgba(0,255,255,0.5);
        }

        .device-selection-container h2 {
            font-family: 'Black Ops One', cursive;
            font-size: 3rem;
            margin-bottom: 3rem;
            background: linear-gradient(45deg, var(--neon-cyan), var(--neon-magenta));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .device-buttons {
            display: flex;
            gap: 2rem;
            justify-content: center;
        }

        .device-btn {
            padding: 2rem 3rem;
            font-family: 'Orbitron', monospace;
            font-size: 1.5rem;
            background: transparent;
            border: 3px solid var(--neon-cyan);
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 0.2rem;
            min-width: 200px;
        }

        .device-btn.computer {
            color: var(--neon-cyan);
            border-color: var(--neon-cyan);
        }

        .device-btn.computer:hover {
            background: var(--neon-cyan);
            color: var(--dark-bg);
            box-shadow: 0 0 30px var(--neon-cyan);
            transform: scale(1.05);
        }

        .device-btn.mobile {
            color: var(--neon-magenta);
            border-color: var(--neon-magenta);
        }

        .device-btn.mobile:hover {
            background: var(--neon-magenta);
            color: var(--dark-bg);
            box-shadow: 0 0 30px var(--neon-magenta);
            transform: scale(1.05);
        }

        .device-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
            display: block;
        }

        /* AI Difficulty Selection */
        #ai-difficulty-selection {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.95);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 150;
            animation: fadeIn 0.3s;
        }

        .ai-difficulty-container {
            background: rgba(0,0,0,0.9);
            border: 3px solid var(--neon-magenta);
            padding: 3rem 4rem;
            text-align: center;
            box-shadow: 0 0 50px rgba(255,0,255,0.5);
        }

        .ai-difficulty-container h2 {
            font-family: 'Black Ops One', cursive;
            font-size: 2.5rem;
            margin-bottom: 3rem;
            background: linear-gradient(45deg, var(--neon-magenta), var(--neon-yellow));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .difficulty-buttons {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
            align-items: center;
        }

        .difficulty-btn {
            padding: 1.2rem 3rem;
            font-family: 'Orbitron', monospace;
            font-size: 1.3rem;
            background: transparent;
            border: 2px solid;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 0.2rem;
            min-width: 300px;
        }

        .difficulty-btn.easy {
            color: var(--health-green);
            border-color: var(--health-green);
        }

        .difficulty-btn.easy:hover {
            background: var(--health-green);
            color: var(--dark-bg);
            box-shadow: 0 0 20px var(--health-green);
        }

        .difficulty-btn.normal {
            color: var(--neon-yellow);
            border-color: var(--neon-yellow);
        }

        .difficulty-btn.normal:hover {
            background: var(--neon-yellow);
            color: var(--dark-bg);
            box-shadow: 0 0 20px var(--neon-yellow);
        }

        .difficulty-btn.medium {
            color: var(--neon-magenta);
            border-color: var(--neon-magenta);
        }

        .difficulty-btn.medium:hover {
            background: var(--neon-magenta);
            color: var(--dark-bg);
            box-shadow: 0 0 20px var(--neon-magenta);
        }

        .difficulty-btn.hard {
            color: var(--damage-red);
            border-color: var(--damage-red);
            opacity: 0.5;
            cursor: not-allowed;
        }

        .difficulty-btn.hard:hover {
            background: transparent;
            box-shadow: none;
        }

        /* Mobile Controls UI */
        #mobile-controls {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 300px;
            z-index: 200;
            display: none;
            pointer-events: none;
        }

        .mobile-dpad {
            position: absolute;
            left: 40px;
            bottom: 40px;
            width: 180px;
            height: 180px;
            pointer-events: all;
        }

        .dpad-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 50px;
            height: 50px;
            background: rgba(0,0,0,0.5);
            border: 2px solid var(--neon-cyan);
            border-radius: 50%;
        }

        .dpad-btn {
            position: absolute;
            width: 60px;
            height: 60px;
            background: rgba(0,255,255,0.2);
            border: 2px solid var(--neon-cyan);
            color: var(--neon-cyan);
            font-size: 2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.1s;
            user-select: none;
            touch-action: none;
        }

        .dpad-btn:active {
            background: var(--neon-cyan);
            color: var(--dark-bg);
            box-shadow: 0 0 20px var(--neon-cyan);
        }

        .dpad-up {
            top: 0;
            left: 60px;
            border-radius: 10px 10px 0 0;
        }

        .dpad-down {
            bottom: 0;
            left: 60px;
            border-radius: 0 0 10px 10px;
        }

        .dpad-left {
            left: 0;
            top: 60px;
            border-radius: 10px 0 0 10px;
        }

        .dpad-right {
            right: 0;
            top: 60px;
            border-radius: 0 10px 10px 0;
        }

        .mobile-action-buttons {
            position: absolute;
            right: 40px;
            bottom: 40px;
            display: flex;
            gap: 20px;
            pointer-events: all;
        }

        .action-btn {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: rgba(255,0,255,0.2);
            border: 3px solid var(--neon-magenta);
            color: var(--neon-magenta);
            font-family: 'Orbitron', monospace;
            font-size: 1.2rem;
            font-weight: 900;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.1s;
            user-select: none;
            touch-action: none;
        }

        .action-btn:active {
            background: var(--neon-magenta);
            color: var(--dark-bg);
            box-shadow: 0 0 20px var(--neon-magenta);
            transform: scale(0.95);
        }

        .action-btn.block {
            background: rgba(255,255,0,0.2);
            border-color: var(--neon-yellow);
            color: var(--neon-yellow);
        }

        .action-btn.block:active {
            background: var(--neon-yellow);
            color: var(--dark-bg);
            box-shadow: 0 0 20px var(--neon-yellow);
        }

        .action-btn.cooldown {
            opacity: 0.3;
            cursor: not-allowed;
            pointer-events: none;
        }

        .action-btn .cooldown-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0,0,0,0.7);
            height: 0%;
            transition: height 0.1s linear;
            border-radius: 0 0 50% 50%;
        }

        .action-btn.recharging .cooldown-overlay {
            animation: cooldownFill 0.5s linear;
        }

        @keyframes cooldownFill {
            from { height: 100%; }
            to { height: 0%; }
        }
    </style>
</head>
<body>
    <!-- Login/Signup Screen -->
    <div id="auth-screen">
        <div class="auth-container">
            <h2 id="auth-title">LOGIN</h2>
            <form id="auth-form">
                <div class="form-group">
                    <label for="username">Username</label>
                    <input type="text" id="username" required autocomplete="username">
                </div>
                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" required autocomplete="current-password">
                </div>
                <div class="error-msg" id="error-msg"></div>
                <button type="submit" class="auth-btn" id="auth-submit">Login</button>
            </form>
            <div class="auth-toggle">
                <span id="toggle-text">Don't have an account? </span>
                <a id="toggle-link">Sign Up</a>
            </div>
        </div>
    </div>

    <!-- Device Selection Screen -->
    <div id="device-selection">
        <div class="device-selection-container">
            <h2>SELECT YOUR DEVICE</h2>
            <div class="device-buttons">
                <button class="device-btn computer" id="computer-btn">
                    <span class="device-icon">üíª</span>
                    COMPUTER
                </button>
                <button class="device-btn mobile" id="mobile-btn">
                    <span class="device-icon">üì±</span>
                    MOBILE/IPAD
                </button>
            </div>
        </div>
    </div>

    <!-- AI Difficulty Selection -->
    <div id="ai-difficulty-selection">
        <div class="ai-difficulty-container">
            <h2>CHOOSE AI BOT DIFFICULTY LEVEL</h2>
            <div class="difficulty-buttons">
                <button class="difficulty-btn easy" id="difficulty-easy">EASY</button>
                <button class="difficulty-btn normal" id="difficulty-normal">NORMAL</button>
                <button class="difficulty-btn medium" id="difficulty-medium">MEDIUM</button>
                <button class="difficulty-btn hard" id="difficulty-hard">HARD [COMING SOON]</button>
            </div>
        </div>
    </div>

    <!-- Coming Soon Modal -->
    <div id="coming-soon-modal">
        <div class="modal-content">
            <button class="close-modal" id="close-modal">√ó</button>
            <h2>COMING SOON</h2>
            <ul class="feature-list">
                <li class="feature-item">
                    <div class="feature-title">üîß MAJOR GLITCH FIXES</div>
                    <div class="feature-desc">Comprehensive bug fixes and performance improvements for smoother gameplay</div>
                    <div class="feature-date">Expected: End of February 2026</div>
                </li>
                <li class="feature-item">
                    <div class="feature-title">üéÆ Multiplayer Mode</div>
                    <div class="feature-desc">Battle your friends online in real-time PvP matches with ranked leaderboards</div>
                    <div class="feature-date">Expected: March 2026</div>
                </li>
                <li class="feature-item">
                    <div class="feature-title">‚öîÔ∏è New Fighters</div>
                    <div class="feature-desc">Unlock 10+ unique fighters, each with special moves and abilities</div>
                    <div class="feature-date">Expected: April 2026</div>
                </li>
                <li class="feature-item">
                    <div class="feature-title">üèÜ Tournament Mode</div>
                    <div class="feature-desc">Compete in 8-fighter tournaments with prize rewards and achievements</div>
                    <div class="feature-date">Expected: May 2026</div>
                </li>
                <li class="feature-item">
                    <div class="feature-title">üåç New Arenas</div>
                    <div class="feature-desc">Fight in diverse locations: Rooftop, Cyber Dojo, Neon City, Space Station</div>
                    <div class="feature-date">Expected: June 2026</div>
                </li>
                <li class="feature-item">
                    <div class="feature-title">üí™ Power-Ups & Special Moves</div>
                    <div class="feature-desc">Collect power-ups during matches and unleash devastating combo attacks</div>
                    <div class="feature-date">Expected: July 2026</div>
                </li>
            </ul>
        </div>
    </div>

    <!-- Admin Console Modal -->
    <div id="admin-console-modal">
        <div class="admin-console-content">
            <button class="close-modal" id="close-admin-modal">√ó</button>
            <h2>ADMIN COMMANDS + ADMIN ABUSE TIMES</h2>
            
            <!-- Split Panel Container -->
            <div class="admin-split-container">
                <!-- Left Panel - Admin Commands -->
                <div class="admin-panel-left">
                    <div class="admin-panel-header">
                        <div class="admin-panel-icon">‚ö°</div>
                        <h3>Admin Commands</h3>
                    </div>
                    
                    <!-- Password Entry -->
                    <div id="admin-password-entry" style="margin-bottom: 2rem;">
                        <div style="margin-bottom: 1rem;">
                            <label style="color: var(--neon-cyan); font-size: 1rem; margin-bottom: 0.5rem; display: block;">ENTER ADMIN CODE</label>
                            <input type="password" id="admin-code-input" placeholder="****" style="width: 100%; padding: 0.8rem; background: rgba(0,0,0,0.7); border: 2px solid var(--neon-cyan); color: var(--neon-cyan); font-family: 'Orbitron', monospace; font-size: 1rem;">
                        </div>
                        <p id="admin-error-msg" style="color: var(--damage-red); text-align: center; display: none; margin-top: 0.5rem;">Invalid code</p>
                        <button id="admin-unlock-btn" style="width: 100%; padding: 1rem; font-family: 'Orbitron', monospace; font-size: 1rem; background: transparent; color: var(--neon-cyan); border: 2px solid var(--neon-cyan); cursor: pointer; text-transform: uppercase; transition: all 0.3s;">UNLOCK</button>
                    </div>
                    
                    <!-- Command Input (Hidden until unlocked) -->
                    <div id="admin-command-panel" style="display: none;">
                        <div style="background: rgba(0,255,255,0.1); border: 1px solid var(--neon-cyan); padding: 1rem; margin-bottom: 1rem; font-size: 0.85rem; color: var(--neon-cyan); line-height: 1.8;">
                            <strong style="color: var(--neon-yellow);">Available Commands:</strong><br>
                            ‚Ä¢ <strong>global_message [message]</strong> - Send global message<br>
                            Signed: Admin
                        </div>
                        
                        <div style="margin-bottom: 1rem;">
                            <label style="color: var(--neon-cyan); font-size: 1rem; margin-bottom: 0.5rem; display: block;">COMMAND INPUT</label>
                            <input type="text" id="admin-command-input" placeholder="global_message Hello!" style="width: 100%; padding: 0.8rem; background: rgba(0,0,0,0.7); border: 2px solid var(--neon-cyan); color: var(--neon-cyan); font-family: 'Orbitron', monospace; font-size: 1rem;">
                        </div>
                        
                        <button id="admin-execute-btn" style="width: 100%; padding: 1rem; font-family: 'Orbitron', monospace; font-size: 1rem; background: transparent; color: var(--neon-yellow); border: 2px solid var(--neon-yellow); cursor: pointer; text-transform: uppercase; transition: all 0.3s;">EXECUTE</button>
                        
                        <div id="admin-output" style="margin-top: 1rem; padding: 1rem; background: rgba(0,0,0,0.7); border: 2px solid var(--neon-cyan); min-height: 100px; max-height: 150px; overflow-y: auto; font-family: 'Courier New', monospace; font-size: 0.85rem; color: var(--neon-cyan);"></div>
                    </div>
                </div>

                <!-- Right Panel - Admin Abuse Times -->
                <div class="admin-panel-right">
                    <div class="admin-panel-header">
                        <div class="admin-panel-icon">üõ°Ô∏è</div>
                        <h3>Admin Abuse Times</h3>
                    </div>
                    <div class="tbd-placeholder">
                        <h4>TBD</h4>
                        <p>Tracking coming soon...</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="welcome-user" id="welcome-user">
        Welcome, <span id="current-user"></span>
        <button class="logout-btn" id="logout-btn">Logout</button>
    </div>

    <!-- Global Message Banner -->
    <div id="global-message"></div>

    <div id="game-container">
        <!-- Title Screen -->
        <div id="title-screen">
            <h1>BRAWL X</h1>
            <div class="subtitle">Ultimate Street Fighter</div>
            <button id="start-btn">Start Fight</button>
            <button id="coming-soon-btn">What's Coming</button>
            <button id="admin-btn">Admin Commands + Admin Abuse Times</button>
        </div>

        <!-- HUD -->
        <div id="hud">
            <div class="hud-top">
                <div class="player-hud">
                    <div class="player-name" style="color: var(--neon-cyan);">PLAYER 1</div>
                    <div class="health-bar-container">
                        <div class="health-bar" id="p1-health" style="width: 100%;"></div>
                    </div>
                </div>
                <div class="player-hud" style="align-items: flex-end;">
                    <div class="player-name" style="color: var(--neon-magenta);">AI OPPONENT</div>
                    <div class="health-bar-container">
                        <div class="health-bar reverse" id="p2-health" style="width: 100%;"></div>
                    </div>
                </div>
            </div>
            <div id="timer">99</div>
            <button id="leave-btn">Leave Match</button>
        </div>

        <!-- Arena -->
        <div id="arena">
            <div id="player1" class="fighter" style="color: var(--neon-cyan);">
                <div class="fighter-body">
                    <div class="head"></div>
                    <div class="torso"></div>
                    <div class="arm arm-left"></div>
                    <div class="arm arm-right"></div>
                    <div class="leg leg-left"></div>
                    <div class="leg leg-right"></div>
                </div>
            </div>
            <div id="player2" class="fighter" style="color: var(--neon-magenta);">
                <div class="fighter-body">
                    <div class="head"></div>
                    <div class="torso"></div>
                    <div class="arm arm-left"></div>
                    <div class="arm arm-right"></div>
                    <div class="leg leg-left"></div>
                    <div class="leg leg-right"></div>
                </div>
            </div>
        </div>

        <!-- Controls -->
        <div id="controls">
            <button id="close-controls">√ó</button>
            <div class="control-group">
                <h3>PLAYER 1</h3>
                <p>
                    <span class="control-key">‚Üë</span><span class="control-key">‚Üê</span><span class="control-key">‚Üì</span><span class="control-key">‚Üí</span> Move<br>
                    <span class="control-key">‚Üë</span> Jump<br>
                    <span class="control-key">SPACE</span> Punch<br>
                    <span class="control-key">CTRL</span> Kick<br>
                    <span class="control-key">SHIFT</span> Block
                </p>
            </div>
            <div class="control-group">
                <h3>AI OPPONENT</h3>
                <p style="color: var(--neon-magenta);">
                    The AI will automatically<br>
                    move, attack, and defend.<br>
                    <br>
                    Defeat the AI to win!
                </p>
            </div>
        </div>

        <!-- Game Over -->
        <div id="game-over">
            <h2>K.O.!</h2>
            <div id="winner-text"></div>
            <button id="restart-btn">Main Menu</button>
        </div>
    </div>

    <!-- Mobile Controls -->
    <div id="mobile-controls">
        <!-- D-Pad -->
        <div class="mobile-dpad">
            <div class="dpad-center"></div>
            <div class="dpad-btn dpad-up" id="mobile-up">‚Üë</div>
            <div class="dpad-btn dpad-down" id="mobile-down">‚Üì</div>
            <div class="dpad-btn dpad-left" id="mobile-left">‚Üê</div>
            <div class="dpad-btn dpad-right" id="mobile-right">‚Üí</div>
        </div>

        <!-- Action Buttons -->
        <div class="mobile-action-buttons">
            <div class="action-btn block" id="mobile-block">
                BLOCK
            </div>
            <div class="action-btn" id="mobile-punch">
                PUNCH
                <div class="cooldown-overlay"></div>
            </div>
            <div class="action-btn" id="mobile-kick">
                KICK
                <div class="cooldown-overlay"></div>
            </div>
        </div>
    </div>

    <script>
        // Device Selection
        let isMobile = false;
        const deviceSelection = document.getElementById('device-selection');
        const computerBtn = document.getElementById('computer-btn');
        const mobileBtn = document.getElementById('mobile-btn');
        const mobileControls = document.getElementById('mobile-controls');

        // AI Difficulty
        const aiDifficultySelection = document.getElementById('ai-difficulty-selection');
        const difficultyEasyBtn = document.getElementById('difficulty-easy');
        const difficultyNormalBtn = document.getElementById('difficulty-normal');
        const difficultyMediumBtn = document.getElementById('difficulty-medium');
        let selectedDifficulty = 'normal';

        // Authentication System
        let currentUser = null;
        let isLoginMode = true;

        const authScreen = document.getElementById('auth-screen');
        const authForm = document.getElementById('auth-form');
        const authTitle = document.getElementById('auth-title');
        const authSubmit = document.getElementById('auth-submit');
        const toggleLink = document.getElementById('toggle-link');
        const toggleText = document.getElementById('toggle-text');
        const errorMsg = document.getElementById('error-msg');
        const welcomeUser = document.getElementById('welcome-user');
        const currentUserSpan = document.getElementById('current-user');
        const logoutBtn = document.getElementById('logout-btn');
        const usernameInput = document.getElementById('username');
        const passwordInput = document.getElementById('password');

        // Global Message System
        const globalMessageBanner = document.getElementById('global-message');
        let globalMessageTimeout = null;

        function showGlobalMessage(message) {
            if (globalMessageTimeout) {
                clearTimeout(globalMessageTimeout);
            }

            globalMessageBanner.classList.remove('fade-out');
            globalMessageBanner.textContent = message;
            globalMessageBanner.style.display = 'block';

            globalMessageTimeout = setTimeout(() => {
                globalMessageBanner.classList.add('fade-out');
                
                setTimeout(() => {
                    globalMessageBanner.style.display = 'none';
                    globalMessageBanner.classList.remove('fade-out');
                }, 500);
            }, 3000);
        }

        // Coming Soon Modal
        const comingSoonBtn = document.getElementById('coming-soon-btn');
        const comingSoonModal = document.getElementById('coming-soon-modal');
        const closeModal = document.getElementById('close-modal');

        comingSoonBtn.addEventListener('click', () => {
            comingSoonModal.style.display = 'flex';
        });

        closeModal.addEventListener('click', () => {
            comingSoonModal.style.display = 'none';
        });

        comingSoonModal.addEventListener('click', (e) => {
            if (e.target === comingSoonModal) {
                comingSoonModal.style.display = 'none';
            }
        });

        // Admin Console Modal
        const adminBtn = document.getElementById('admin-btn');
        const adminConsoleModal = document.getElementById('admin-console-modal');
        const closeAdminModal = document.getElementById('close-admin-modal');
        const adminCodeInput = document.getElementById('admin-code-input');
        const adminUnlockBtn = document.getElementById('admin-unlock-btn');
        const adminPasswordEntry = document.getElementById('admin-password-entry');
        const adminCommandPanel = document.getElementById('admin-command-panel');
        const adminErrorMsg = document.getElementById('admin-error-msg');
        const adminCommandInput = document.getElementById('admin-command-input');
        const adminExecuteBtn = document.getElementById('admin-execute-btn');
        const adminOutput = document.getElementById('admin-output');
        const ADMIN_CODE = '67';

        adminBtn.addEventListener('click', () => {
            adminConsoleModal.style.display = 'flex';
            adminCodeInput.value = '';
            adminErrorMsg.style.display = 'none';
            adminPasswordEntry.style.display = 'block';
            adminCommandPanel.style.display = 'none';
            adminOutput.innerHTML = '';
        });

        closeAdminModal.addEventListener('click', () => {
            adminConsoleModal.style.display = 'none';
        });

        adminConsoleModal.addEventListener('click', (e) => {
            if (e.target === adminConsoleModal) {
                adminConsoleModal.style.display = 'none';
            }
        });

        // Admin unlock
        adminUnlockBtn.addEventListener('click', unlockAdmin);
        adminCodeInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                unlockAdmin();
            }
        });

        function unlockAdmin() {
            if (adminCodeInput.value === ADMIN_CODE) {
                adminPasswordEntry.style.display = 'none';
                adminCommandPanel.style.display = 'block';
                addAdminLog('Access granted. Admin mode activated.', 'success');
                adminCommandInput.focus();
            } else {
                adminErrorMsg.style.display = 'block';
                adminCodeInput.value = '';
            }
        }

        // Admin execute command
        adminExecuteBtn.addEventListener('click', executeAdminCommand);
        adminCommandInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                executeAdminCommand();
            }
        });

        function executeAdminCommand() {
            const command = adminCommandInput.value.trim();
            if (!command) return;

            addAdminLog('> ' + command, 'command');
            adminCommandInput.value = '';

            // Parse command
            const parts = command.split(' ');
            const cmd = parts[0].toLowerCase();
            const args = parts.slice(1).join(' ');

            if (cmd === 'global_message') {
                if (args.length > 0) {
                    showGlobalMessage(args + ' - Admin');
                    addAdminLog('Global message sent successfully', 'success');
                } else {
                    addAdminLog('Error: Message required. Usage: global_message [message]', 'error');
                }
            } else {
                addAdminLog('Unknown command: "' + cmd + '". Available: global_message', 'error');
            }

            adminOutput.scrollTop = adminOutput.scrollHeight;
        }

        function addAdminLog(message, type) {
            const line = document.createElement('div');
            line.style.marginBottom = '0.3rem';
            if (type === 'success') {
                line.style.color = 'var(--health-green)';
            } else if (type === 'error') {
                line.style.color = 'var(--damage-red)';
            } else if (type === 'command') {
                line.style.color = 'var(--neon-yellow)';
            } else {
                line.style.color = 'var(--neon-cyan)';
            }
            line.textContent = message;
            adminOutput.appendChild(line);
        }

        // Check if user is already logged in
        window.addEventListener('load', () => {
            const savedUser = localStorage.getItem('brawlx_current_user');
            if (savedUser) {
                currentUser = savedUser;
                showGame();
            }
        });

        // Toggle between login and signup
        toggleLink.addEventListener('click', () => {
            isLoginMode = !isLoginMode;
            if (isLoginMode) {
                authTitle.textContent = 'LOGIN';
                authSubmit.textContent = 'Login';
                toggleText.textContent = "Don't have an account? ";
                toggleLink.textContent = 'Sign Up';
            } else {
                authTitle.textContent = 'SIGN UP';
                authSubmit.textContent = 'Sign Up';
                toggleText.textContent = 'Already have an account? ';
                toggleLink.textContent = 'Login';
            }
            errorMsg.style.display = 'none';
            usernameInput.value = '';
            passwordInput.value = '';
        });

        // Handle form submission
        authForm.addEventListener('submit', handleAuth);
        authSubmit.addEventListener('click', (e) => {
            e.preventDefault();
            handleAuth(e);
        });

        function handleAuth(e) {
            e.preventDefault();
            e.stopPropagation();
            
            const username = usernameInput.value.trim();
            const password = passwordInput.value;

            if (username.length < 3) {
                showError('Username must be at least 3 characters');
                return false;
            }

            if (password.length < 4) {
                showError('Password must be at least 4 characters');
                return false;
            }

            if (isLoginMode) {
                const users = JSON.parse(localStorage.getItem('brawlx_users') || '{}');
                if (users[username] && users[username] === password) {
                    currentUser = username;
                    localStorage.setItem('brawlx_current_user', username);
                    showGame();
                } else {
                    showError('Invalid username or password');
                }
            } else {
                const users = JSON.parse(localStorage.getItem('brawlx_users') || '{}');
                if (users[username]) {
                    showError('Username already exists');
                } else {
                    users[username] = password;
                    localStorage.setItem('brawlx_users', JSON.stringify(users));
                    currentUser = username;
                    localStorage.setItem('brawlx_current_user', username);
                    showGame();
                }
            }
            
            return false;
        }

        // Logout
        logoutBtn.addEventListener('click', () => {
            localStorage.removeItem('brawlx_current_user');
            currentUser = null;
            location.reload();
        });

        function showError(message) {
            errorMsg.textContent = message;
            errorMsg.style.display = 'block';
        }

        function showGame() {
            authScreen.style.display = 'none';
            welcomeUser.style.display = 'block';
            currentUserSpan.textContent = currentUser;
        }

        // Game State
        const game = {
            active: false,
            timer: 99,
            timerInterval: null,
            player1: {
                x: 100,
                y: 100,
                health: 100,
                isBlocking: false,
                combo: 0,
                isJumping: false,
                velocityY: 0,
                punchCooldown: false,
                kickCooldown: false
            },
            player2: {
                x: window.innerWidth - 180,
                y: 100,
                health: 100,
                isBlocking: false,
                combo: 0,
                isJumping: false,
                velocityY: 0
            }
        };

        // Elements
        const titleScreen = document.getElementById('title-screen');
        const startBtn = document.getElementById('start-btn');
        const hud = document.getElementById('hud');
        const arena = document.getElementById('arena');
        const controls = document.getElementById('controls');
        const gameOver = document.getElementById('game-over');
        const winnerText = document.getElementById('winner-text');
        const restartBtn = document.getElementById('restart-btn');
        const timerDisplay = document.getElementById('timer');
        const p1Health = document.getElementById('p1-health');
        const p2Health = document.getElementById('p2-health');
        const player1El = document.getElementById('player1');
        const player2El = document.getElementById('player2');

        const closeControlsBtn = document.getElementById('close-controls');
        closeControlsBtn.addEventListener('click', () => {
            controls.style.display = 'none';
        });

        const leaveBtn = document.getElementById('leave-btn');
        leaveBtn.addEventListener('click', (e) => {
            e.preventDefault();
            e.stopPropagation();
            returnToLobby();
        });

        function returnToLobby() {
            game.active = false;
            if (game.timerInterval) {
                clearInterval(game.timerInterval);
                game.timerInterval = null;
            }
            
            game.timer = 99;
            game.player1.health = 100;
            game.player2.health = 100;
            game.player1.x = 100;
            game.player2.x = window.innerWidth - 180;
            game.player1.combo = 0;
            game.player2.combo = 0;
            game.player1.punchCooldown = false;
            game.player1.kickCooldown = false;
            
            hud.style.display = 'none';
            arena.style.display = 'none';
            controls.style.display = 'none';
            mobileControls.style.display = 'none';
            gameOver.style.display = 'none';
            titleScreen.style.display = 'flex';
            welcomeUser.style.display = 'block';
        }

        const ai = {
            nextAction: 0,
            actionDelay: 0,
            state: 'idle',
            difficulty: 0.7,
            reactionSpeed: 500
        };

        function setAIDifficulty() {
            if (selectedDifficulty === 'easy') {
                ai.difficulty = 0.4;
                ai.reactionSpeed = 800;
            } else if (selectedDifficulty === 'normal') {
                ai.difficulty = 0.6;
                ai.reactionSpeed = 600;
            } else if (selectedDifficulty === 'medium') {
                ai.difficulty = 0.8;
                ai.reactionSpeed = 350;
            }
        }

        const keys = {
            arrowleft: false,
            arrowright: false,
            arrowup: false,
            arrowdown: false
        };

        startBtn.addEventListener('click', showDeviceSelection);
        restartBtn.addEventListener('click', () => {
            returnToLobby();
        });

        function showDeviceSelection() {
            titleScreen.style.display = 'none';
            deviceSelection.style.display = 'flex';
        }

        computerBtn.addEventListener('click', () => {
            isMobile = false;
            deviceSelection.style.display = 'none';
            aiDifficultySelection.style.display = 'flex';
        });

        mobileBtn.addEventListener('click', () => {
            isMobile = true;
            deviceSelection.style.display = 'none';
            aiDifficultySelection.style.display = 'flex';
        });

        // AI Difficulty Selection
        difficultyEasyBtn.addEventListener('click', () => {
            selectedDifficulty = 'easy';
            aiDifficultySelection.style.display = 'none';
            startGame();
        });

        difficultyNormalBtn.addEventListener('click', () => {
            selectedDifficulty = 'normal';
            aiDifficultySelection.style.display = 'none';
            startGame();
        });

        difficultyMediumBtn.addEventListener('click', () => {
            selectedDifficulty = 'medium';
            aiDifficultySelection.style.display = 'none';
            startGame();
        });

        function startGame() {
            hud.style.display = 'block';
            arena.style.display = 'block';
            welcomeUser.style.display = 'none';
            game.active = true;
            
            // Set AI difficulty based on selection
            setAIDifficulty();
            
            // Show appropriate controls
            if (isMobile) {
                mobileControls.style.display = 'block';
                controls.style.display = 'none';
            } else {
                controls.style.display = 'flex';
                mobileControls.style.display = 'none';
            }
            
            game.timerInterval = setInterval(() => {
                game.timer--;
                timerDisplay.textContent = game.timer;
                
                if (game.timer <= 0) {
                    endGame();
                }

                if (game.timer <= 10) {
                    timerDisplay.style.color = 'var(--damage-red)';
                    timerDisplay.style.animation = 'timerPulse 0.5s ease-in-out infinite';
                }
            }, 1000);

            gameLoop();
        }

        function resetGame() {
            game.timer = 99;
            game.player1.health = 100;
            game.player2.health = 100;
            game.player1.x = 100;
            game.player2.x = window.innerWidth - 180;
            game.player1.combo = 0;
            game.player2.combo = 0;
            
            p1Health.style.width = '100%';
            p2Health.style.width = '100%';
            timerDisplay.textContent = '99';
            timerDisplay.style.color = 'var(--neon-yellow)';
            timerDisplay.style.animation = 'timerPulse 1s ease-in-out infinite';
            
            gameOver.style.display = 'none';
            game.active = true;
            
            if (!game.timerInterval) {
                game.timerInterval = setInterval(() => {
                    game.timer--;
                    timerDisplay.textContent = game.timer;
                    
                    if (game.timer <= 0) {
                        endGame();
                    }

                    if (game.timer <= 10) {
                        timerDisplay.style.color = 'var(--damage-red)';
                        timerDisplay.style.animation = 'timerPulse 0.5s ease-in-out infinite';
                    }
                }, 1000);
            }
        }

        document.addEventListener('keydown', (e) => {
            const key = e.key.toLowerCase();
            keys[key] = true;
            
            if (!game.active) return;

            if (e.key === ' ' || e.key === 'Spacebar') {
                e.preventDefault();
                if (!game.player1.punchCooldown) {
                    attack(game.player1, player1El, game.player2, 'punch');
                }
            }
            if (e.key === 'Control') {
                e.preventDefault();
                if (!game.player1.kickCooldown) {
                    attack(game.player1, player1El, game.player2, 'kick');
                }
            }
            if (e.key === 'Shift') {
                e.preventDefault();
                game.player1.isBlocking = true;
                player1El.classList.add('blocking');
            }

            if (e.key === 'ArrowUp' && !game.player1.isJumping) {
                e.preventDefault();
                jump(game.player1, player1El);
            }
        });

        document.addEventListener('keyup', (e) => {
            const key = e.key.toLowerCase();
            keys[key] = false;
            
            if (e.key === 'Shift') {
                game.player1.isBlocking = false;
                player1El.classList.remove('blocking');
            }
        });

        function jump(player, element) {
            player.isJumping = true;
            player.velocityY = -15;
            element.classList.add('jumping');
            
            setTimeout(() => {
                element.classList.remove('jumping');
                player.isJumping = false;
            }, 500);
        }

        function attack(attacker, attackerEl, defender, type) {
            const distance = Math.abs(attacker.x - defender.x);
            const hitRange = type === 'kick' ? 120 : 100;
            
            // Check cooldowns for player1 only
            if (attacker === game.player1) {
                if (type === 'punch' && attacker.punchCooldown) return;
                if (type === 'kick' && attacker.kickCooldown) return;
            }
            
            if (type === 'punch') {
                attackerEl.classList.add('punching');
                setTimeout(() => attackerEl.classList.remove('punching'), 200);
                
                // Set punch cooldown for player1
                if (attacker === game.player1) {
                    attacker.punchCooldown = true;
                    if (isMobile) {
                        mobilePunchBtn.classList.add('cooldown', 'recharging');
                    }
                    setTimeout(() => {
                        attacker.punchCooldown = false;
                        if (isMobile) {
                            mobilePunchBtn.classList.remove('cooldown', 'recharging');
                        }
                    }, 500);
                }
            } else {
                attackerEl.classList.add('kicking');
                setTimeout(() => attackerEl.classList.remove('kicking'), 300);
                
                // Set kick cooldown for player1
                if (attacker === game.player1) {
                    attacker.kickCooldown = true;
                    if (isMobile) {
                        mobileKickBtn.classList.add('cooldown', 'recharging');
                    }
                    setTimeout(() => {
                        attacker.kickCooldown = false;
                        if (isMobile) {
                            mobileKickBtn.classList.remove('cooldown', 'recharging');
                        }
                    }, 500);
                }
            }

            if (distance < hitRange) {
                const damage = type === 'kick' ? 8 : 5;
                const actualDamage = defender.isBlocking ? damage * 0.3 : damage;
                
                defender.health = Math.max(0, defender.health - actualDamage);
                
                if (defender === game.player1) {
                    p1Health.style.width = defender.health + '%';
                } else {
                    p2Health.style.width = defender.health + '%';
                }
                
                const defenderEl = defender === game.player1 ? player1El : player2El;
                defenderEl.classList.add('hit');
                setTimeout(() => defenderEl.classList.remove('hit'), 200);
                
                if (!defender.isBlocking) {
                    attacker.combo++;
                    if (attacker.combo > 1) {
                        showCombo(attacker === game.player1 ? player1El : player2El, attacker.combo);
                    }
                } else {
                    attacker.combo = 0;
                }

                createHitParticles(defender === game.player1 ? player1El : player2El);
                
                if (defender.health <= 0) {
                    endGame();
                }
            }
        }

        function showCombo(element, combo) {
            const comboEl = document.createElement('div');
            comboEl.className = 'combo';
            comboEl.textContent = combo + ' HIT COMBO!';
            comboEl.style.left = element.offsetLeft + 'px';
            comboEl.style.top = (element.offsetTop - 50) + 'px';
            arena.appendChild(comboEl);
            
            setTimeout(() => comboEl.remove(), 500);
        }

        function createHitParticles(element) {
            for (let i = 0; i < 8; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                
                const angle = (Math.PI * 2 * i) / 8;
                const distance = 50;
                const tx = Math.cos(angle) * distance;
                const ty = Math.sin(angle) * distance;
                
                particle.style.setProperty('--tx', tx + 'px');
                particle.style.setProperty('--ty', ty + 'px');
                particle.style.left = (element.offsetLeft + 40) + 'px';
                particle.style.top = (element.offsetTop + 60) + 'px';
                
                arena.appendChild(particle);
                
                setTimeout(() => particle.remove(), 500);
            }
        }

        function gameLoop() {
            if (!game.active) return;

            const speed = 5;

            if (keys['arrowleft'] && game.player1.x > 0) {
                game.player1.x -= speed;
            }
            if (keys['arrowright'] && game.player1.x < window.innerWidth - 100) {
                game.player1.x += speed;
            }

            updateAI();

            player1El.style.left = game.player1.x + 'px';
            player2El.style.left = game.player2.x + 'px';

            requestAnimationFrame(gameLoop);
        }

        function updateAI() {
            const distance = Math.abs(game.player1.x - game.player2.x);
            const now = Date.now();

            if (now > ai.nextAction) {
                ai.actionDelay = ai.reactionSpeed + Math.random() * 400;
                ai.nextAction = now + ai.actionDelay;

                if (distance > 150) {
                    ai.state = 'moving';
                } else if (distance < 80) {
                    if (Math.random() < 0.7) {
                        ai.state = 'attacking';
                    } else {
                        ai.state = 'backing';
                    }
                } else {
                    const healthRatio = game.player2.health / 100;
                    
                    if (healthRatio < 0.3 && Math.random() < 0.5) {
                        ai.state = 'defending';
                    } else if (Math.random() < ai.difficulty) {
                        ai.state = 'attacking';
                    } else {
                        ai.state = 'moving';
                    }
                }
            }

            const aiSpeed = 4;
            
            switch(ai.state) {
                case 'moving':
                    if (game.player2.x > game.player1.x + 100) {
                        game.player2.x -= aiSpeed;
                    } else if (game.player2.x < game.player1.x - 100) {
                        game.player2.x += aiSpeed;
                    }
                    break;
                    
                case 'backing':
                    if (game.player2.x > game.player1.x) {
                        game.player2.x += aiSpeed;
                    } else {
                        game.player2.x -= aiSpeed;
                    }
                    break;
                    
                case 'attacking':
                    const attackType = Math.random() < 0.6 ? 'punch' : 'kick';
                    attack(game.player2, player2El, game.player1, attackType);
                    ai.state = 'idle';
                    
                    if (Math.random() < 0.2 && !game.player2.isJumping) {
                        jump(game.player2, player2El);
                    }
                    break;
                    
                case 'defending':
                    if (!game.player2.isBlocking) {
                        game.player2.isBlocking = true;
                        player2El.classList.add('blocking');
                        setTimeout(() => {
                            game.player2.isBlocking = false;
                            player2El.classList.remove('blocking');
                            ai.state = 'idle';
                        }, 500 + Math.random() * 500);
                    }
                    break;
            }

            if (game.player2.x < 0) game.player2.x = 0;
            if (game.player2.x > window.innerWidth - 100) game.player2.x = window.innerWidth - 100;
        }

        function endGame() {
            game.active = false;
            clearInterval(game.timerInterval);
            game.timerInterval = null;
            
            let winner;
            if (game.player1.health > game.player2.health) {
                winner = 'YOU WIN!';
                winnerText.style.color = 'var(--neon-cyan)';
            } else if (game.player2.health > game.player1.health) {
                winner = 'AI WINS!';
                winnerText.style.color = 'var(--neon-magenta)';
            } else {
                winner = 'DRAW!';
                winnerText.style.color = 'var(--neon-yellow)';
            }
            
            winnerText.textContent = winner;
            gameOver.style.display = 'block';
        }

        // Mobile Controls Touch Events
        const mobileUpBtn = document.getElementById('mobile-up');
        const mobileDownBtn = document.getElementById('mobile-down');
        const mobileLeftBtn = document.getElementById('mobile-left');
        const mobileRightBtn = document.getElementById('mobile-right');
        const mobilePunchBtn = document.getElementById('mobile-punch');
        const mobileKickBtn = document.getElementById('mobile-kick');
        const mobileBlockBtn = document.getElementById('mobile-block');

        // D-Pad controls - Jump
        function handleMobileJump(e) {
            e.preventDefault();
            if (game.active && !game.player1.isJumping) {
                jump(game.player1, player1El);
            }
        }
        mobileUpBtn.addEventListener('touchstart', handleMobileJump);
        mobileUpBtn.addEventListener('mousedown', handleMobileJump);

        // Left movement
        function handleLeftStart(e) {
            e.preventDefault();
            if (game.active) {
                keys['arrowleft'] = true;
            }
        }
        function handleLeftEnd(e) {
            e.preventDefault();
            keys['arrowleft'] = false;
        }
        mobileLeftBtn.addEventListener('touchstart', handleLeftStart);
        mobileLeftBtn.addEventListener('mousedown', handleLeftStart);
        mobileLeftBtn.addEventListener('touchend', handleLeftEnd);
        mobileLeftBtn.addEventListener('mouseup', handleLeftEnd);
        mobileLeftBtn.addEventListener('mouseleave', handleLeftEnd);

        // Right movement
        function handleRightStart(e) {
            e.preventDefault();
            if (game.active) {
                keys['arrowright'] = true;
            }
        }
        function handleRightEnd(e) {
            e.preventDefault();
            keys['arrowright'] = false;
        }
        mobileRightBtn.addEventListener('touchstart', handleRightStart);
        mobileRightBtn.addEventListener('mousedown', handleRightStart);
        mobileRightBtn.addEventListener('touchend', handleRightEnd);
        mobileRightBtn.addEventListener('mouseup', handleRightEnd);
        mobileRightBtn.addEventListener('mouseleave', handleRightEnd);

        // Punch button
        function handlePunch(e) {
            e.preventDefault();
            if (game.active && !game.player1.punchCooldown) {
                attack(game.player1, player1El, game.player2, 'punch');
            }
        }
        mobilePunchBtn.addEventListener('touchstart', handlePunch);
        mobilePunchBtn.addEventListener('mousedown', handlePunch);

        // Kick button
        function handleKick(e) {
            e.preventDefault();
            if (game.active && !game.player1.kickCooldown) {
                attack(game.player1, player1El, game.player2, 'kick');
            }
        }
        mobileKickBtn.addEventListener('touchstart', handleKick);
        mobileKickBtn.addEventListener('mousedown', handleKick);

        // Block button
        function handleBlockStart(e) {
            e.preventDefault();
            if (game.active) {
                game.player1.isBlocking = true;
                player1El.classList.add('blocking');
            }
        }
        function handleBlockEnd(e) {
            e.preventDefault();
            game.player1.isBlocking = false;
            player1El.classList.remove('blocking');
        }
        mobileBlockBtn.addEventListener('touchstart', handleBlockStart);
        mobileBlockBtn.addEventListener('mousedown', handleBlockStart);
        mobileBlockBtn.addEventListener('touchend', handleBlockEnd);
        mobileBlockBtn.addEventListener('mouseup', handleBlockEnd);
        mobileBlockBtn.addEventListener('mouseleave', handleBlockEnd);
    </script>
</body>
</html>
